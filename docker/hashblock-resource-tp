# This Dockerfile is for running protogen, lint, and unit-tests

FROM ubuntu:xenial

RUN echo "deb apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 8AA7AF1F1091A5FD" && \
    echo 'deb http://repo.sawtooth.me/ubuntu/1.0/stable xenial universe' >> /etc/apt/sources.list && \
    apt-get update && \
    apt-get install -y --allow-unauthenticated -q \
        python3-pip \
        python3-sawtooth-sdk

RUN mkdir -p project/hashblock-exchange && \
  mkdir -p project/hashblock-exchange/bin && \
  mkdir -p project/hashblock-exchange/families/resource && \
  mkdir -p /var/log/sawtooth

WORKDIR project/hashblock-exchange

COPY bin/resource-tp bin
COPY families/resource/hashblock_resource families/resource/hashblock_resource 

ENV PATH $PATH:/project/hashblock-exchange/bin
